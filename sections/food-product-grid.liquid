<section class="food-grid page-width" data-food-grid>
  <div class="section-heading section-heading--with-filter">
    <h2>{{ section.settings.heading }}</h2>
    <div class="food-filter">
      <label for="FoodCategoryFilter-{{ section.id }}">Filter</label>
      <select id="FoodCategoryFilter-{{ section.id }}" data-food-filter>
        <option value="all">All</option>
        {% assign seen_types = '' %}
        {% for product in section.settings.collection.products limit: section.settings.products_to_show %}
          {% assign handle = product.type | handleize %}
          {% unless seen_types contains handle %}
            <option value="{{ handle }}">{{ product.type | default: 'Uncategorized' }}</option>
            {% assign seen_types = seen_types | append: handle | append: ',' %}
          {% endunless %}
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="food-grid__cards" data-food-grid-cards>
    {% if section.settings.collection != blank %}
      {% for product in section.settings.collection.products limit: section.settings.products_to_show %}
        {% render 'food-card', product: product %}
      {% endfor %}
    {% else %}
      {% for i in (1..8) %}
        <article class="food-card">
          <div class="food-card__media">{{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}</div>
          <div class="food-card__content"><h3>Food item {{ i }}</h3><p class="food-card__price">{{ 1599 | money }}</p></div>
        </article>
      {% endfor %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Food product grid",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Our Food Menu" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "range", "id": "products_to_show", "label": "Products to show", "min": 4, "max": 24, "step": 1, "default": 12 }
  ],
  "presets": [{ "name": "Food product grid" }]
}
{% endschema %}
